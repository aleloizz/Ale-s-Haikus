<!DOCTYPE html>
<html lang="it">
<head>
    <!-- ====== META BASE / SEO ====== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="robots" content="index, follow">
    <title>Haiku Online & Analizzatore Metrico | Ale's Haikus</title>
    <meta name="description" content="Scrivi e analizza haiku online: analizzatore metrico avanzato per poesie brevi, tanka, sonetti e versi liberi. Crea, ottimizza e condividi le tue poesie.">
    <meta name="keywords" content="haiku online, analizzatore metrica, poesie brevi, scrivere haiku, conta sillabe poesia, tanka, sonetto, poesia italiana, poesia giapponese">
    <link rel="canonical" href="https://www.aleshaikus.me/landing">
    <meta name="theme-color" content="#faf7ff">

    <!-- Open Graph / Twitter -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Haiku Online & Analizzatore Metrico | Ale's Haikus">
    <meta property="og:description" content="Strumento gratuito per scrivere e verificare haiku, tanka e altre poesie. Scopri, impara e crea.">
    <meta property="og:image" content="https://www.aleshaikus.me/static/og-image.jpg">
    <meta property="og:url" content="https://www.aleshaikus.me/landing">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Favicons (riuso set esistente) -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}?v=1.2">
    <link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename='favicon-96x96.png') }}?v=1.2">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}?v=1.2">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}?v=1.2">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}?v=1.2">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}?v=1.2">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}?v=1.2">

    <!-- Preconnect / Performance Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">

    <!-- Preload hero background (WebP fallback) -->
    <link rel="preload" as="image" href="{{ url_for('static', filename='images/background.webp') }}">

    <!-- Inline Critical CSS (Hero + Navbar + Above the fold) -->
    <style>
    :root{--primary:#D4B8FF;--secondary:#FFE5D9;--accent:#A2D7D8;--text:#5E5E5E;--bg:#FAF7FF;--gradient:linear-gradient(135deg,#cca9ff 0%,#ffb18d 100%)}
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{min-height:100%;font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#faf7ff;color:var(--text);-webkit-font-smoothing:antialiased}
    body.loading{background:#fbbda3!important}
    a{text-decoration:none;color:inherit}
    img{max-width:100%;height:auto;display:block}
    .visually-hidden{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0 0 0 0)!important;white-space:nowrap!important;border:0!important}
    header{position:relative;z-index:10}
    .navbar{display:flex;align-items:center;justify-content:center;padding:.6rem 1rem;background:rgba(255,255,255,0.12);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,0.18)}
    .nav-list{list-style:none;display:flex;gap:.85rem;margin:0;padding:0}
    .nav-list a{display:inline-flex;align-items:center;padding:.45rem .9rem;border-radius:.75rem;font-weight:500;color:#fff;font-size:.95rem;transition:background .3s ease}
    .nav-list a:hover,.nav-list a:focus-visible{background:rgba(255,255,255,0.18);outline:none}
    .hero{position:relative;isolation:isolate;display:flex;align-items:center;justify-content:center;text-align:center;padding:clamp(3.5rem,12vh,7.5rem) 1rem;overflow:hidden;background:var(--gradient);color:#fff}
    .hero:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 30% 40%,rgba(255,255,255,.25),transparent 60%),radial-gradient(circle at 70% 60%,rgba(255,255,255,.18),transparent 65%);mix-blend-mode:overlay;pointer-events:none}
    .hero-inner{max-width:960px;margin-inline:auto;display:flex;flex-direction:column;gap:1.25rem}
    h1{font-size:clamp(2.15rem,4.2vw,3.35rem);line-height:1.08;font-weight:600;letter-spacing:-.5px;margin:0;font-family:'Inter',sans-serif}
    .hero-sub{font-size:clamp(1.05rem,1.4vw,1.35rem);font-weight:300;line-height:1.45;margin:0 auto;max-width:760px}
    .cta-wrap{display:flex;flex-wrap:wrap;justify-content:center;gap:.85rem;margin-top:.5rem}
    .btn{--btn-bg:var(--primary);--btn-color:#282828;position:relative;display:inline-flex;align-items:center;justify-content:center;padding:.85rem 1.4rem;border-radius:2rem;font-size:.97rem;font-weight:600;line-height:1.1;background:var(--btn-bg);color:var(--btn-color);border:2px solid rgba(255,255,255,0.35);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);box-shadow:0 8px 20px -6px rgba(0,0,0,.18),0 1px 4px rgba(0,0,0,.08);cursor:pointer;transition:transform .35s cubic-bezier(.16,.8,.32,1),box-shadow .35s ease,background .35s ease}
    .btn-primary{--btn-bg:rgba(255,255,255,0.82);--btn-color:#4a3c62}
    .btn-accent{--btn-bg:#A2D7D8;--btn-color:#10393d}
    .btn-gradient{--btn-bg:linear-gradient(90deg,#d4b8ff,#ffe5d9);--btn-color:#4a3c62}
    .btn:hover{transform:translateY(-4px);box-shadow:0 12px 28px -8px rgba(0,0,0,.25),0 4px 10px rgba(0,0,0,.12)}
    .btn:active{transform:translateY(-1px)}
    .btn:focus-visible{outline:2px solid #fff;outline-offset:2px}
    .scroll-indicator{margin-top:2.25rem;opacity:.85;font-size:.8rem;letter-spacing:.15em;text-transform:uppercase;display:inline-flex;align-items:center;gap:.35rem;font-weight:500}
    .pulse-dot{width:8px;height:8px;border-radius:50%;background:#fff;box-shadow:0 0 0 0 rgba(255,255,255,.6);animation:pulse 2.2s infinite}
    @keyframes pulse{to{box-shadow:0 0 0 14px rgba(255,255,255,0);transform:scale(.9)}}
    .features{background:#faf7ff;position:relative;padding:clamp(3.5rem,10vh,5.5rem) 1rem 3.5rem}
    .features-grid{--min:250px;display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--min),1fr));gap:1.75rem;max-width:1140px;margin:0 auto}
    .feature-card{position:relative;padding:1.4rem 1.35rem 1.6rem;border-radius:1.25rem;background:rgba(255,255,255,.75);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.55);box-shadow:0 4px 26px -10px rgba(0,0,0,.1),0 2px 8px -2px rgba(0,0,0,.05);display:flex;flex-direction:column;gap:.65rem;overflow:hidden;min-height:200px;opacity:0;transform:translateY(28px);will-change:transform,opacity}
    .feature-card h3{font-size:1.05rem;margin:0;font-weight:600;color:#4a3c62;display:flex;align-items:center;gap:.5rem}
    .feature-card p{margin:0;font-size:.9rem;line-height:1.45;color:#5e5e5e}
    .tag-pill{display:inline-block;background:linear-gradient(90deg,#cca9ff,#ffb18d);font-size:.65rem;letter-spacing:.07em;font-weight:600;padding:.35rem .7rem;border-radius:2rem;color:#fff;text-transform:uppercase}
    .section-head{max-width:820px;margin:0 auto 2.2rem;text-align:center}
    .section-head h2{font-size:clamp(1.65rem,2.8vw,2.15rem);margin:.25rem 0;font-weight:600;letter-spacing:-.5px;color:#4a3c62}
    .section-head p{font-size:1rem;line-height:1.55;margin:0 auto;max-width:680px;color:#665c73}
    .seo-block{background:linear-gradient(135deg,#f3ecff,#fff);padding:3.25rem 1rem 3.75rem;margin:0;position:relative}
    .seo-inner{max-width:1080px;margin:0 auto;display:grid;gap:2.5rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .seo-card{padding:1.4rem 1.25rem 1.6rem;border-radius:1rem;background:#fff;box-shadow:0 6px 18px -6px rgba(0,0,0,.08);display:flex;flex-direction:column;gap:.55rem;opacity:0;transform:translateY(26px);will-change:opacity,transform}
    .seo-card h3{margin:0;font-size:1rem;font-weight:600;color:#403655}
    .seo-card p{margin:0;font-size:.85rem;line-height:1.45;color:#595063}
    footer{background:#1e142c;color:#fff;text-align:center;padding:2.25rem 1rem 2.75rem;margin-top:0;font-size:.8rem;line-height:1.4;position:relative}
    footer a{color:#d4b8ff}
    .footer-links{display:flex;justify-content:center;gap:1.25rem;flex-wrap:wrap;margin:.85rem 0 1.15rem;font-size:.75rem;letter-spacing:.05em;text-transform:uppercase}
    .lazy-illustration{max-width:720px;margin:2.2rem auto 0;border-radius:1.25rem;box-shadow:0 18px 38px -18px rgba(0,0,0,.25),0 4px 16px -4px rgba(0,0,0,.12);opacity:0;transform:translateY(40px);transition:opacity .9s cubic-bezier(.16,.8,.32,1),transform .9s cubic-bezier(.16,.8,.32,1)}
    .lazy-illustration.loaded{opacity:1;transform:translateY(0)}
    @media (max-width:640px){.hero-inner{gap:1rem}.cta-wrap{flex-direction:column}.nav-list{gap:.4rem}.nav-list a{font-size:.85rem;padding:.4rem .7rem}.feature-card{min-height:unset}.footer-links{flex-direction:column;gap:.4rem}}
    @media (prefers-reduced-motion:reduce){.feature-card,.seo-card,.lazy-illustration{animation:none!important;transition:none!important;transform:none!important;opacity:1!important}.btn{transition:none}}
    </style>

    <!-- Preload & Load Non-critical CSS (Landing specific) -->
    <link rel="preload" href="{{ url_for('static', filename='css/landing.css') }}?v=0.1" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}?v=0.1"></noscript>
    <link rel="preload" href="{{ url_for('static', filename='css/icons.css') }}?v=1.4" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ url_for('static', filename='css/icons.css') }}?v=1.4"></noscript>

    <!-- Font Display Swap (minimal subset inline) -->
    <style>
    @font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF;}
    @font-face{font-family:'Playfair Display';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/playfairdisplay/v36/nuFvD-vYSZviVYUb_rj3ij__anPXJzDwcbmjWBN2PKdFvXDYbtXK-F2qC0s.woff2) format('woff2');unicode-range:U+0000-00FF;}
    </style>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital@1&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital@1&display=swap"></noscript>

    <script>document.documentElement.classList.add('js');</script>

    <!-- Structured Data (WebSite + WebPage + FAQ) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Ale's Haikus Landing",
      "description": "Landing page di ale's haikus,l'analizzatore metrico per haiku e poesie brevi online.",
      "url": "https://www.aleshaikus.me/landing",
      "publisher": {"@type": "Organization","name": "Ale's Haikus"},
      "mainEntity": {
        "@type": "SoftwareApplication",
        "name": "Ale's Poetry Analyzer",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Web",
        "offers": {"@type":"Offer","price":"0","priceCurrency":"EUR"}
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {"@type": "Question","name": "Come contare le sillabe in un haiku?","acceptedAnswer": {"@type": "Answer","text": "Inserisci i tuoi versi nell'analizzatore e riceverai il conteggio automatico con gestione di dittonghi, sineresi e eccezioni linguistiche."}},
        {"@type": "Question","name": "Posso analizzare altre forme oltre agli haiku?","acceptedAnswer": {"@type": "Answer","text": "Sì, supportiamo tanka, limerick, sonetto, versi liberi e altre strutture poetiche."}},
        {"@type": "Question","name": "Il servizio è gratuito?","acceptedAnswer": {"@type": "Answer","text": "Sì, l'analizzatore è gratuito e non richiede registrazione."}}
      ]
    }
    </script>

    <!-- Anime.js per animazioni (hash SRI corretto per 3.2.1 da cdnjs) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
    <!-- JS Landing (defer) -->
    <script defer src="{{ url_for('static', filename='js/landing.js') }}?v=0.1"></script>
</head>
<body class="loading">
    <a href="#contenuto" class="visually-hidden focusable">Salta al contenuto</a>
    <header>
        <nav class="navbar" aria-label="Navigazione principale">
            <ul class="nav-list">
                <li><a href="{{ url_for('web.index') }}" title="Analizzatore poetico">Analizza</a></li>
                <li><a href="{{ url_for('web.bacheca') }}" title="Bacheca poesie">Bacheca</a></li>
                <li><a href="{{ url_for('web.wiki') }}" title="Wiki poetica">Wiki</a></li>
            </ul>
        </nav>
    </header>

    <main id="contenuto">
        <!-- HERO -->
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-inner">
                <span class="tag-pill" aria-hidden="true">Beta Evoluta</span>
                <h1 id="hero-title">Scrivi, Analizza e Condividi Haiku & Poesie in Tempo Reale</h1>
                <p class="hero-sub">Uno <strong>strumento metrico intelligente</strong> per haiku, tanka, sonetti e versi liberi. Conta sillabe, verifica schemi e lasciati ispirare dalla community.
                </p>
                <div class="cta-wrap" role="group" aria-label="Azioni principali">
                    <a class="btn btn-primary" href="{{ url_for('web.index') }}" title="Vai all'analizzatore" data-cta="analyze">Inizia Subito</a>
                    <a class="btn btn-accent" href="{{ url_for('web.bacheca') }}" title="Scopri la bacheca" data-cta="bacheca">Haiku della Community</a>
                    <a class="btn btn-gradient" href="{{ url_for('web.wiki') }}" title="Leggi la wiki poetica" data-cta="wiki">Impara le Forme</a>
                </div>
                <span class="scroll-indicator" aria-hidden="true"><span class="pulse-dot"></span> Scorri per scoprire</span>
            </div>
        </section>

        <!-- FEATURE PRINCIPALI -->
        <section class="features" id="funzioni" aria-labelledby="feat-title">
            <div class="section-head">
                <h2 id="feat-title">Perché usare Ale's Haikus?</h2>
                <p>Ottimizzato per <em>performance</em>, precisione metrica e SEO. Creato per poeti digitali, studenti e creatori di contenuti.</p>
            </div>
            <div class="features-grid" role="list">
                <article class="feature-card" role="listitem">
                    <h3><i class="bi bi-cpu"></i> Analisi metrica avanzata</h3>
                    <p>Algoritmi che gestiscono dittonghi, trittonghi, sinalefi, iati ed eccezioni per un conteggio sillabico affidabile.</p>
                </article>
                <article class="feature-card" role="listitem">
                    <h3><i class="bi bi-lightning-charge"></i> Ultra rapido & ottimizzato</h3>
                    <p>Critical CSS inline, lazy loading, preloading mirato e JS modulare per punteggi alti su PageSpeed.</p>
                </article>
                <article class="feature-card" role="listitem">
                    <h3><i class="bi bi-people"></i> Community poetica</h3>
                    <p>Pubblica e scopri poesie brevi originali, filtra per autore e tipologia, trova ispirazione.</p>
                </article>
                <article class="feature-card" role="listitem">
                    <h3><i class="bi bi-journal-text"></i> Wiki integrata</h3>
                    <p>Forme poetiche spiegate chiaramente: haiku, tanka, sonetto, limerick, versi liberi e altro.</p>
                </article>
                <article class="feature-card" role="listitem">
                    <h3><i class="bi bi-shield-check"></i> Accessibilità & UX</h3>
                    <p>Focus visibili, riduzione motion, colori leggibili e struttura semantica ottimizzata.</p>
                </article>
                <article class="feature-card" role="listitem">
                    <h3><i class="bi bi-rocket-takeoff"></i> Pronto per crescere</h3>
                    <p>Architettura modulare, CDN-friendly, caching e progressive enhancement senza blocchi.</p>
                </article>
            </div>

            <picture class="lazy-illustration" data-ll="true">
                <source type="image/webp" srcset="{{ url_for('static', filename='images/background.webp') }}">
                <img src="{{ url_for('static', filename='images/background.jpg') }}" alt="Astratto sfumato viola e arancio ispirazione poetica" width="1280" height="720" loading="lazy" decoding="async">
            </picture>
        </section>

        <!-- BLOCCO SEO / BENEFITS -->
        <section class="seo-block" aria-labelledby="seo-head">
            <div class="section-head">
                <h2 id="seo-head">Ottimizzato per Poeti e Motori di Ricerca</h2>
                <p>Performance core web vitals elevate e contenuti semantici pensati per <strong>haiku online</strong>, <strong>poesie brevi</strong> e <strong>scrivere haiku</strong>.</p>
            </div>
            <div class="seo-inner">
                <div class="seo-card">
                    <h3><i class="bi bi-graph-up"></i> Struttura semantica</h3>
                    <p>Heading gerarchici (H1-H2-H3), alt testuali e JSON-LD per valorizzare il contenuto.</p>
                </div>
                <div class="seo-card">
                    <h3><i class="bi bi-search"></i> Keyword naturali</h3>
                    <p>Focus su "haiku online", "poesie brevi" e varianti correlate utilizzate in modo organico.</p>
                </div>
                <div class="seo-card">
                    <h3><i class="bi bi-speedometer2"></i> Core Web Vitals</h3>
                    <p>Minimizzazione blocchi render, inline critical path, lazy loading e moduli differiti.</p>
                </div>
                <div class="seo-card">
                    <h3><i class="bi bi-diagram-3"></i> Dati strutturati</h3>
                    <p>Snippet avanzati (FAQ + SoftwareApplication) per CTR più alto nei risultati di ricerca.</p>
                </div>
                <div class="seo-card">
                    <h3><i class="bi bi-cloud-arrow-down"></i> Caching pronto</h3>
                    <p>File fingerprintabili (?v=) e risorse comprimibili via GZIP/Brotli sul server.</p>
                </div>
                <div class="seo-card">
                    <h3><i class="bi bi-magic"></i> Animazioni progressive</h3>
                    <p>Anime.js inizializzato solo se disponibile; fallback CSS per contenuti essenziali.</p>
                </div>
            </div>
        </section>

        <!-- SEZIONE TEST ANIMAZIONE SVG (solo per sviluppo) -->
                <section id="morphing-test" aria-labelledby="morphing-title" style="background:#111;padding:3.5rem 1rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;">
            <h2 id="morphing-title" style="color:#fff;font-size:1.35rem;margin:0;font-weight:600;letter-spacing:.5px;">Test Animazione Morphing</h2>
            <p style="color:#bbb;font-size:.9rem;max-width:620px;text-align:center;margin:0;">Sezione temporanea per provare il morphing di un path SVG con <code>anime.js</code>. Non indicizzata: verrà rimossa o ottimizzata in produzione.</p>
            <div style="width:100%;max-width:520px;aspect-ratio:2/1;display:flex;align-items:center;justify-content:center;">
                                <svg viewBox="0 0 400 200" role="img" aria-label="Animazione morphing path" style="width:100%;height:100%;overflow:visible">
                                        <!-- Path iniziale "curva" -->
                                        <path id="morphingPath" d="M 10 50 L 90 50" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" />
                </svg>
            </div>
            <button type="button" id="restartMorph" class="btn btn-accent" style="--btn-bg:#A2D7D8;--btn-color:#10393d;">Restart</button>
            <script>
                                                (function(){
                                                    // RIMOSSO uso flubber: implementazione leggera basata su sampling punti
                                                    // Obiettivo: interpolare fra due path qualsiasi (anche con segmenti diversi)
                                                    const pathEl = document.getElementById('morphingPath');
                                                    if(!pathEl) return;

                                                    const INITIAL_PATH = pathEl.getAttribute('d');
                                                    // Path finale (semplificato) H A I K U continuo per rendering più fluido
                                                    

                                                    const FINAL_PATH = "M22.75-22.75L22.75-19.90L13.06-19.90L13.06-2.86L18.19-2.86L18.19 0L4.54 0L4.54-2.86L9.69-2.86L9.69-19.90L4.54-19.90L4.54-22.75L9.69-22.75Q9.69-27.44 12.12-29.92Q14.55-32.40 19.46-32.40L19.46-32.40Q20.61-32.40 21.40-32.32Q22.19-32.25 22.75-32.15L22.75-32.15L22.75-29.30Q22.05-29.39 21.28-29.47Q20.51-29.54 19.46-29.54L19.46-29.54Q16.26-29.54 14.66-27.92Q13.06-26.29 13.06-22.75L13.06-22.75L22.75-22.75ZM50.63-11.30L50.63-11.30Q50.63-8.64 49.79-6.47Q48.95-4.30 47.38-2.75Q45.80-1.20 43.60-0.32Q41.41 0.56 38.70 0.56L38.70 0.56Q36.04 0.56 33.84-0.32Q31.64-1.20 30.07-2.75Q28.49-4.30 27.65-6.47Q26.81-8.64 26.81-11.30L26.81-11.30Q26.81-13.89 27.65-16.13Q28.49-18.36 30.07-19.93Q31.64-21.51 33.84-22.40Q36.04-23.29 38.70-23.29L38.70-23.29Q41.41-23.29 43.60-22.40Q45.80-21.51 47.38-19.93Q48.95-18.36 49.79-16.13Q50.63-13.89 50.63-11.30ZM47.29-11.30L47.29-11.30Q47.29-13.26 46.72-14.90Q46.14-16.55 45.02-17.80Q43.90-19.04 42.30-19.75Q40.70-20.46 38.70-20.46L38.70-20.46Q36.69-20.46 35.10-19.75Q33.50-19.04 32.40-17.80Q31.30-16.55 30.73-14.90Q30.15-13.26 30.15-11.30L30.15-11.30Q30.15-9.35 30.73-7.70Q31.30-6.05 32.40-4.86Q33.50-3.66 35.10-2.98Q36.69-2.29 38.70-2.29L38.70-2.29Q40.70-2.29 42.30-2.98Q43.90-3.66 45.02-4.86Q46.14-6.05 46.72-7.70Q47.29-9.35 47.29-11.30ZM77.20-22.29L76.10-19.56Q74.29-20.46 71.80-20.46L71.80-20.46Q69.75-20.46 68.14-19.58Q66.53-18.70 65.41-17.27Q64.28-15.84 63.68-14.00Q63.09-12.16 63.09-10.21L63.09-10.21L63.09-2.86L68.24-2.86L68.24 0L54.59 0L54.59-2.86L59.74-2.86L59.74-19.90L54.59-19.90L54.59-22.75L63.09-22.75L63.09-17.04Q65.38-23.29 71.80-23.29L71.80-23.29Q73.54-23.29 74.82-23.07Q76.10-22.85 77.20-22.29L77.20-22.29ZM104.64-16.36L104.64 0L101.29 0L101.29-16.36Q101.29-18.31 100.61-19.38Q99.93-20.46 98.63-20.46L98.63-20.46Q96.73-20.46 95.84-18.46Q94.95-16.46 94.95-12.84L94.95-12.84L94.95 0L91.58 0L91.58-16.36Q91.58-18.31 90.88-19.38Q90.19-20.46 88.89-20.46L88.89-20.46Q87.70-20.46 86.99-19.75Q86.28-19.04 85.88-17.94Q85.47-16.85 85.35-15.50Q85.23-14.16 85.23-12.84L85.23-12.84L85.23 0L81.88 0L81.88-22.75L85.23-22.75L85.23-19.46Q86.28-23.29 89.79-23.29L89.79-23.29Q93.14-23.29 94.34-19.95L94.34-19.95Q96.00-23.29 99.02-23.29L99.02-23.29Q101.93-23.29 103.28-21.57Q104.64-19.85 104.64-16.36L104.64-16.36ZM109.13-6.15L109.13-6.15Q109.13-8.30 110.21-9.75Q111.28-11.21 113.02-12.05Q114.77-12.89 117.03-13.27Q119.29-13.65 121.63-13.65L121.63-13.65Q122.53-13.65 123.25-13.62Q123.97-13.60 124.62-13.55Q125.27-13.50 125.93-13.43Q126.59-13.35 127.37-13.26L127.37-13.26L127.37-14.89Q127.37-16.55 126.65-17.63Q125.93-18.70 124.88-19.32Q123.83-19.95 122.68-20.20Q121.53-20.46 120.73-20.46L120.73-20.46Q118.19-20.46 116.04-19.78Q113.89-19.09 112.04-17.94L112.04-17.94L110.52-20.46Q112.57-21.70 115.12-22.50Q117.68-23.29 120.73-23.29L120.73-23.29Q122.58-23.29 124.38-22.81Q126.17-22.34 127.60-21.35Q129.03-20.36 129.88-18.75Q130.74-17.14 130.74-14.89L130.74-14.89L130.74 0L127.37 0L127.37-3.81Q126.49-2.71 125.38-1.88Q124.27-1.05 123.05-0.52Q121.83 0 120.61 0.28Q119.38 0.56 118.29 0.56L118.29 0.56Q113.77 0.56 111.45-1.17Q109.13-2.91 109.13-6.15ZM118.29-2.29L118.29-2.29Q120.39-2.29 122.06-2.92Q123.73-3.54 124.90-4.47Q126.07-5.40 126.72-6.45Q127.37-7.50 127.37-8.35L127.37-8.35L127.37-10.50Q125.73-10.74 124.23-10.77Q122.73-10.79 121.63-10.79L121.63-10.79Q119.82-10.79 118.15-10.55Q116.48-10.30 115.23-9.75Q113.99-9.20 113.23-8.33Q112.48-7.45 112.48-6.15L112.48-6.15Q112.48-4.71 113.88-3.50Q115.28-2.29 118.29-2.29Z";

                                                    // Parametri sampling
                                                    const SAMPLES = 560; // più alto = morph più fluido

                                                    function samplePath(d){
                                                        // Crea path temporaneo per calcolare lunghezze
                                                        const tmp = document.createElementNS('http://www.w3.org/2000/svg','path');
                                                        tmp.setAttribute('d', d);
                                                        const total = tmp.getTotalLength();
                                                        const pts = [];
                                                        for(let i=0;i<SAMPLES;i++){
                                                            const p = tmp.getPointAtLength(total * (i/(SAMPLES-1)));
                                                            pts.push([p.x,p.y]);
                                                        }
                                                        return pts;
                                                    }

                                                    const initialPts = samplePath(INITIAL_PATH);
                                                    const finalPts   = samplePath(FINAL_PATH);

                                                    function mix(a,b,t){ return a + (b-a)*t; }
                                                    function buildPath(t, forward=true){
                                                        const segs = [];
                                                        for(let i=0;i<SAMPLES;i++){
                                                            const from = forward? initialPts[i] : finalPts[i];
                                                            const to   = forward? finalPts[i] : initialPts[i];
                                                            const x = mix(from[0], to[0], t);
                                                            const y = mix(from[1], to[1], t);
                                                            segs.push([x,y]);
                                                        }
                                                        // Converti in polilinea M + L ...
                                                        let d = 'M'+segs[0][0].toFixed(2)+' '+segs[0][1].toFixed(2);
                                                        for(let i=1;i<segs.length;i++){
                                                            d += ' L'+segs[i][0].toFixed(2)+' '+segs[i][1].toFixed(2);
                                                        }
                                                        return d;
                                                    }

                                                    let forward = true;
                                                    let animInstance = null;

                                                    function start(){
                                                        if(!window.anime){ return setTimeout(start, 80); }
                                                        if(animInstance) animInstance.pause();
                                                        animInstance = window.anime({
                                                            targets:{p:0},
                                                            p:1,
                                                            duration:4200,
                                                            easing:'easeInOutCubic',
                                                            direction:'alternate',
                                                            loop:true,
                                                            update:anim => {
                                                                const t = anim.animations[0].currentValue;
                                                                const d = buildPath(t, forward);
                                                                pathEl.setAttribute('d', d);
                                                            },
                                                            loopBegin:()=>{ forward = !forward; }
                                                        });
                                                    }

                                                    function restart(){ forward = true; start(); }
                                                    window.addEventListener('load', start);
                                                    document.getElementById('restartMorph').addEventListener('click', restart);
                                                })();
            </script>
        </section>
    </main>

    <footer>
        <div class="footer-links" aria-label="Link utili">
            <a href="{{ url_for('web.index') }}">Analizzatore</a>
            <a href="{{ url_for('web.bacheca') }}">Bacheca</a>
            <a href="{{ url_for('web.wiki') }}">Wiki</a>
            <a href="/sitemap.xml">Sitemap</a>
            <a href="/robots.txt">Robots</a>
        </div>
        <p>&copy; <span id="year"></span> Ale's Haikus – poesia digitale e metrica intelligente.<br><small>dedicato a tutti i poeti innamorati e alle loro muse</small></p>
    </footer>

    <script>
    // Rimozione stato loading appena possibile
    window.addEventListener('DOMContentLoaded',()=>{document.body.classList.remove('loading');});
    </script>
</body>
</html>